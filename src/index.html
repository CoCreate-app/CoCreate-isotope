<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="https://cdn.cocreate.app/favicon.ico" type="image/ico" sizes="16x16">
  
  <!-- CoCreate UI -->
  <link rel="stylesheet" href="../../css/CoCreate.min.css" type="text/css" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" crossorigin="anonymous" />    
  
  <!-- DHTMLX Window -->
  <link rel="stylesheet" href="https://cdn.dhtmlx.com/edge/dhtmlx.css" type="text/css"> 
  <script src="https://cdn.dhtmlx.com/edge/dhtmlx.js" type="text/javascript"></script>
  
  <style>
    /* ---- grid ---- */
    .grid {
      background: #DDD;
      max-width: 1200px;
      height: 600px;
    }
    
    /* clear fix */
    .grid:after {
      content: '';
      display: block;
      clear: both;
    }
    
    /* ---- .grid-item ---- */
    
    .grid-item {
      float: left;
      width: 100px;
      height: 100px;
      background: #0D8;
      border: 2px solid #333;
      border-color: hsla(0, 0%, 0%, 0.7);
    }
    
    .grid-item--width2 { width: 200px; }
    .grid-item--height2 { height: 200px; }
    
    .grid-sizer {
        width:100px;
    }

  </style>
</head>

<body>
    <div id="modal-viewport" class="hidden"></div>
    <div data-main_content_id="content" class="nav">
        <ul class="cocreate-scroll display:inline-flex direction:rtl font-size:20px align-items-center">
            <li><a class="btn-modal-close"><i class="fas fa-times"></i></a></li>
            <li><a class="btn-modal-maximize"><i data-transform_to="far fa-window-restore" class="far fa-window-maximize"></i></a></li>
            <li><a class="btn-modal-minimize"><i class="far fa-window-minimize"></i></a></li>
            <li><a data-fullscreen><i data-transform_to="fas fa-compress" class="fas fa-expand"></i></a></li>
            <li>
                <a data-window_url="render.html" data-pass_collection="modules" data-pass_module_id="" data-pass_prefix="form_" data-pass_to="builder" data-window_width="100%" data-pass_id="render">
                    <i class="fas fa-palette"></i>
                    <div data-pass_collection="modules"  data-pass_module_id=""  data-pass_prefix=""  data-pass_to="render"  class="sessionBuilderUI_Id"></div>
                </a>
            </li>
  			<li><a data-collection="module_activity" data-module-activity_id="" data-pass_id="form-fields" class="delete-document btn-modal-close"><i class="far fa-trash-alt"></i></a></li>
	    </ul>
    </div>
	<div data-main_content_id="content">

        <div class="grid isotope-grid resize-grid" 
            isotope-itemselector="grid-item" 
            isotope-layoutMode="fitColumns" 
            isotope-columnWidth="1" 
            isotope-rowHeight="200"
            resizable="true"
            resize-itemselector="grid-item"
            resize-snapWidth="100"
            resize-snapHeight="100"
            draggable="true"
            drag-snapWidth="20"
            drag-snapHeight="20"
        >
            <!--<div class="grid-sizer"></div>-->
            <!--<div class="grid-item grid-item--width2"></div>-->
            <!--<div class="grid-item grid-item--height2"></div>-->
            <!--<div class="grid-item"></div>-->
            <!--<div class="grid-item"></div>-->
            <!--<div class="grid-item grid-item--width2 grid-item--height2"></div>-->
            <!--<div class="grid-item grid-item--width2"></div>-->
            <!--<div class="grid-item grid-item--width2"></div>-->
            <!--<div class="grid-item grid-item--height2"></div>-->
            <!--<div class="grid-item"></div>-->
            <!--<div class="grid-item grid-item--width2"></div>-->
            <!--<div class="grid-item grid-item--height2"></div>-->
            <!--<div class="grid-item"></div>-->
            <!--<div class="grid-item"></div>-->
            
            <div class="grid-item grid-item--height2"></div>
            <div class="grid-item"></div>
            <div class="grid-item"></div>
            <div class="grid-item"></div>
            <div class="grid-item grid-item--height2"></div>
            <div class="grid-item grid-item--height2"></div>
            <div class="grid-item"></div>
            <div class="grid-item"></div>
            <div class="grid-item grid-item--height2"></div>
            <div class="grid-item"></div>
            <div class="grid-item grid-item--height2"></div>
            <div class="grid-item"></div>
            <div class="grid-item"></div>
            <div class="grid-item"></div>
        </div>

    </div>
</body>
    <script>
    var config = {
      apiKey: 'c2b08663-06e3-440c-ef6f-13978b42883a',
      securityKey: 'f26baf68-e3a9-45fc-effe-502e47116265',
      organization_Id: '5de0387b12e200ea63204d6c'
    }
    
  </script>


  <script src="https://server.cocreate.app/js/CoCreate.min.js"></script>
  <script src="https://unpkg.com/interactjs/dist/interact.min.js"></script>
  <script src='https://npmcdn.com/isotope-layout@3/dist/isotope.pkgd.js'></script>
  <script src='https://npmcdn.com/isotope-fit-columns@1/fit-columns.js'></script>
  
  <script>
        
        /**
         * For Isotope function
         **/
  
        var gridContainer = document.querySelector('.isotope-grid');
        var layoutMode = gridContainer.getAttribute('isotope-layoutMode');
        var itemWidth = gridContainer.getAttribute('isotope-columnWidth');
        var itemHeight = gridContainer.getAttribute('isotope-rowHeight');
        var itemSelector = gridContainer.getAttribute('isotope-itemselector');
        
        itemSelector = (itemSelector) ? "." + itemSelector : ".grid-item";
        layoutMode = (layoutMode) ? layoutMode : "masonry";
        
        itemWidth = decisionSize(itemWidth);
        itemHeight = decisionSize(itemHeight);
        
        var options = {
            itemSelector,
            layoutMode
        }
        
        
        if (layoutMode == "masonry") {
            options.masonry = {
                columnWidth : itemWidth
            }
            options.percentPosition = true;
        } else if (layoutMode == "fitColumns") {
            
        }

        var iso = new Isotope( '.grid', options);
        
        function decisionSize(size) {
            if (!size) {
                return null;
            }
            var ret_size = parseInt(size)
            if (isNaN(ret_size)) {
                ret_size = "." + size;
            }
            return ret_size;
        }
        
        
        /**
         * For resize and snapping function using interact.js
         **/
        var resizeContainer = document.querySelector('.resize-grid'); 
        var resizeItem = resizeContainer.getAttribute('resize-itemselector');
        var isResize = resizeContainer.getAttribute('resizable');
        var resizeWidth = resizeContainer.getAttribute('resize-snapWidth');
        var resizeHeight = resizeContainer.getAttribute('resize-snapHeight');
        
        resizeItem = (resizeItem) ? "." + resizeItem : ".resizable";
        resizeWidth = (resizeWidth) ? resizeWidth : resizeHeight;
        resizeHeight = (resizeHeight) ? resizeHeight : resizeWidth;
        
        var resizeSnapObj = null;
        
        if (resizeWidth && resizeHeight) {
            resizeSnapObj = interact.modifiers.snapSize({
               targets: [
                   interact.createSnapGrid({width: resizeWidth, height: resizeHeight})
                ] 
            });
        }
        
        if (isResize) {
            
            interact(resizeItem).resizable({
                edges: { left: true, right: true, bottom: true, top: true },
                modifiers: [resizeSnapObj]
            }).on('resizemove', function (event) {
                var target = event.target
                var x = (parseFloat(target.getAttribute('data-x')) || 0)
                var y = (parseFloat(target.getAttribute('data-y')) || 0)
            
                target.style.width = event.rect.width + 'px'
                target.style.height = event.rect.height + 'px'
    
                x += event.deltaRect.left
                y += event.deltaRect.top

                target.setAttribute('data-x', x)
                target.setAttribute('data-y', y)
                
                //. resort gird
                if (iso) {
                    iso.arrange({ sortBy: "original-order" });
                } else {
                    target.style.webkitTransform = target.style.transform = 'translate(' + x + 'px,' + y + 'px)'
                }
              }) 
        }
        

  </script>
</html>
